# Conifguration file for configure SLURM resource manager for CEEMS API server
---
ceems_api_server:
  data:
    path: TO_REPLACE
    backup_path: TO_REPLACE
  admin:
    users:
      - grafana
clusters:
  - id: slurm-0
    manager: slurm
    updaters:
      - tsdb-0
    cli: 
      path: pkg/api/testdata

  - id: slurm-1
    manager: slurm
    updaters:
      - tsdb-0
    cli: 
      path: pkg/api/testdata

updaters:
  - id: tsdb-0
    updater: tsdb
    web:
      url: http://localhost:9090
    extra_config:
      cutoff_duration: 0s
      queries:
        # Avgerage CPU utilisation
        avg_cpu_usage: 
          total: avg_cpu_usage

        # Avgerage CPU Memory utilisation
        avg_cpu_mem_usage: 
          total: avg_cpu_mem_usage

        # Total CPU energy usage in kWh
        total_cpu_energy_usage_kwh: 
          total: total_cpu_energy_usage_kwh

        # Total CPU emissions in gms
        total_cpu_emissions_gms: 
          total: total_cpu_emissions_gms

        # Average GPU utilization
        avg_gpu_usage: 
          total: avg_gpu_usage

        # Average GPU memory utilization
        avg_gpu_mem_usage: 
          total: avg_gpu_mem_usage

        # Total GPU energy usage in kWh
        total_gpu_energy_usage_kwh: 
          total: total_gpu_energy_usage_kwh

        # Total GPU emissions in gms
        total_gpu_emissions_gms: 
          total: total_gpu_emissions_gms

        # Total IO Read stats
        total_io_read_stats: 
          bytes: total_io_read_stats_bytes
          requests: total_io_read_stats_requests

        # Total IO Write stats
        total_io_write_stats: 
          bytes: total_io_write_stats_bytes
          requests: total_io_write_stats_requests

        # Total Ingress stats
        total_ingress_stats: 
          bytes: total_ingress_stats_bytes
          packets: total_ingress_stats_packets

        # Total Outgress stats
        total_outgress_stats: 
          bytes: total_outgress_stats_bytes
          packets: total_outgress_stats_packets
